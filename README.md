# Blockwright

A browser-based 3D landscape generator with Minecraft-style block building. Built with Three.js — no build tools required.

![Screenshot with house, towers and church](screen.png)

## Background

I created this to test the new Opus 4.6 with Claude Code. The first step was to create a landscape/terrain generator, then add the first-person view, then Minecraft-style building, and finally AI creation of buildings.
Pretty amazing — this worked almost flawlessly with no errors in between. I also started a version with Codex and the new gpt-5.3-codex, also very nice, but I like the Claude version better. E.g. Codex also implemented a first-person view, but you cannot turn the camera (it always points to the middle).

The subscription usage was on the other hand much better: Codex just used a few percent, while with Opus 4.6 I reached the 5-hour limit pretty fast. I used a part of the bonus $50 currently given by Anthropic to get to the next 5-hour window, but it still took me another 5-hour session to get where this project is now.

HINT: if you try the AI building feature, be prepared to pay for it. The 'church' in the screenshot for example cost 10 cents in API usage.


## Features

- **Procedural terrain** — Simplex noise with fBm octaves, altitude-based vertex coloring (sand, grass, rock, snow), island-shaped falloff
- **Environment** — Water with animated waves, drifting clouds, sky dome, rocks, wildflowers, trees, cartoon chickens, fog
- **Time of day** — Slider controls sun position, sky colors, lighting, fog, and bloom in real time
- **First-person mode** — Walk around the landscape with WASD + mouse look
- **Block building** — Place and remove Minecraft-style blocks in first person (6 block types)
- **Blockify terrain** — Toggle converts the smooth terrain into Minecraft-style voxel blocks using InstancedMesh (sand near water, grass in midlands, stone on peaks). Chickens are hidden automatically in blocky mode
- **AI Structure Builder** — Describe a structure (e.g. "small house", "bridge") and Claude generates a block layout via the Anthropic API. Preview it as a ghost blueprint, rotate with Q/E, then click to place
- **Export / Import** — Save placed blocks as a JSON file and re-import them later as blueprints (ghost preview, rotation, click to place). Uses the same format as the AI builder, so exported files can be shared, hand-edited, or re-imported into any session
- **Chickens** — Cartoon chickens roam the grass with walking, pecking, and idle animations (toggleable via sidebar checkbox)
- **Seed system** — Enter a numeric or text seed to revisit the same landscape
- **Screenshot** — Download the current view as PNG
- **Post-processing** — Bloom with dynamic intensity based on time of day

## Getting Started

Serve the files with any static HTTP server:

```bash
cd /workspace
python3 -m http.server 8000
```

Then open http://localhost:8000 in a browser.

## Controls

### Orbit View (default)
- **Left-drag** — Rotate camera
- **Right-drag** — Pan
- **Scroll** — Zoom

### First-Person Mode
| Input | Action |
|-------|--------|
| W/A/S/D | Move |
| Shift | Sprint |
| Mouse | Look around |
| Left click | Place block |
| Right click | Remove block |
| 1-6 / Scroll | Select block type |
| Esc | Release cursor |

### Blueprint Mode (after AI Build)
| Input | Action |
|-------|--------|
| Q / E | Rotate 90° |
| Left click | Place all blocks |
| Right click / Esc | Cancel |
| W/A/S/D | Move (repositions blueprint) |

### Block Types
1. Dirt
2. Grass
3. Stone
4. Wood
5. Sand
6. Glass (translucent)

## File Structure

```
index.html        — HTML shell, import map, UI overlay, CSS
js/app.js         — Scene, camera, controls, lighting, block system, render loop
js/terrain.js     — Procedural generation: terrain, water, trees, rocks, flowers, chickens, sky, clouds
block_bench/      — LLM tower benchmark results (see below)
```

## AI Structure Builder

1. Click **API Key** at the bottom of the sidebar and paste your Anthropic API key (stored in localStorage only)
2. Type a description in the **AI Build** field (e.g. "small house", "tower", "bridge")
3. Click **Build** — the app calls Claude Sonnet 4.5 to generate a block layout
4. You'll auto-enter first-person mode with a ghost blueprint preview
5. Walk to position it, press Q/E to rotate, left-click to place, right-click to cancel

## Export / Import

- **Export Blocks** — Downloads all placed blocks as `structure.json`. Coordinates are normalized (y starts at 0, x/z centered) so structures are portable.
- **Import** — Load any `.json` file in the same format. The structure appears as a blueprint ghost that you can rotate and place, identical to AI-generated builds.

The JSON format is a flat array of block objects:
```json
[{"x":0,"y":0,"z":0,"type":2},{"x":1,"y":0,"z":0,"type":3},...]
```

## Block Bench — LLM Tower Comparison

The `block_bench/` directory contains tower structures generated by different LLMs, all given the exact same prompt (the system prompt used by the AI Build feature) with the user message "Build a tower". Each response was saved as a JSON file that can be imported directly into Blockwright.

Included models:
- Claude Opus 4.6
- DeepSeek 3.2
- Gemini 3 Pro
- GLM 4.7
- GPT 5.2
- Grok 4.1
- Kimi K2.5

To compare them yourself: click **Import**, select any file from `block_bench/`, and place the tower in your world. It's interesting to see how each model interprets "tower" — they vary quite a bit in size, material choices, and architectural style.

## Dependencies

Loaded via CDN (jsDelivr), no install needed:

- [Three.js](https://threejs.org/) 0.170.0
- [simplex-noise](https://github.com/jwagner/simplex-noise.js) 4.0.3
- [Anthropic API](https://docs.anthropic.com/) — called directly from browser (requires API key)
